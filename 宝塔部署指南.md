# ğŸ… NoPotato å®å¡”é¢æ¿éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²æ¸…å•

### 1. åŸŸåè§£æé…ç½®
- [x] æ·»åŠ Aè®°å½•ï¼špotato.yeadon.cc â†’ æœåŠ¡å™¨IP
- [x] ç­‰å¾…DNSç”Ÿæ•ˆï¼ˆé€šå¸¸5-10åˆ†é’Ÿï¼‰

### 2. å®å¡”é¢æ¿ç¯å¢ƒæ£€æŸ¥
- [ ] Nginx 1.20+
- [ ] Node.js 18.x
- [ ] MongoDB 4.4+
- [ ] PM2ç®¡ç†å™¨

### 3. é¡¹ç›®æ–‡ä»¶ä¸Šä¼ 
- [ ] å‰ç«¯æ–‡ä»¶ä¸Šä¼ åˆ° `/www/wwwroot/nopotato/frontend/`
- [ ] åç«¯æ–‡ä»¶ä¸Šä¼ åˆ° `/www/wwwroot/nopotato/backend/`

## ğŸš€ è¯¦ç»†éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç½‘ç«™

1. **å®å¡”é¢æ¿ â†’ ç½‘ç«™ â†’ æ·»åŠ ç«™ç‚¹**
   - åŸŸåï¼š`potato.yeadon.cc`
   - æ ¹ç›®å½•ï¼š`/www/wwwroot/nopotato`
   - PHPç‰ˆæœ¬ï¼šçº¯é™æ€ï¼ˆä¸éœ€è¦PHPï¼‰

### ç¬¬äºŒæ­¥ï¼šä¸Šä¼ é¡¹ç›®æ–‡ä»¶

**æ–¹æ³•1ï¼šä½¿ç”¨å®å¡”æ–‡ä»¶ç®¡ç†å™¨**
1. è¿›å…¥ `/www/wwwroot/nopotato/`
2. åˆ›å»º `frontend` å’Œ `backend` æ–‡ä»¶å¤¹
3. ä¸Šä¼ å¯¹åº”æ–‡ä»¶

**æ–¹æ³•2ï¼šä½¿ç”¨FTP/SFTP**
- ä½¿ç”¨FileZillaç­‰å·¥å…·ä¸Šä¼ 

**æ–‡ä»¶ç»“æ„ï¼š**
```
/www/wwwroot/nopotato/
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ login.html
â”‚   â”œâ”€â”€ register.html
â”‚   â”œâ”€â”€ profile.html
â”‚   â”œâ”€â”€ ranking.html
â”‚   â”œâ”€â”€ ai-chat.html
â”‚   â”œâ”€â”€ styles.css
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ api.js
â”‚   â””â”€â”€ config.js
â””â”€â”€ backend/
    â”œâ”€â”€ index.js
    â”œâ”€â”€ package.json
    â”œâ”€â”€ config/
    â”œâ”€â”€ controllers/
    â”œâ”€â”€ models/
    â”œâ”€â”€ routes/
    â””â”€â”€ middleware/
```

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®åç«¯æœåŠ¡

1. **å®‰è£…ä¾èµ–**
```bash
cd /www/wwwroot/nopotato/backend
npm install --production
```

2. **åˆ›å»ºç¯å¢ƒé…ç½®**
åœ¨ `/www/wwwroot/nopotato/backend/` åˆ›å»º `.env` æ–‡ä»¶ï¼š
```env
# æœåŠ¡å™¨é…ç½®
PORT=5000
NODE_ENV=production

# æ•°æ®åº“é…ç½®
MONGO_URI=mongodb://localhost:27017/nopotato

# JWT é…ç½®
JWT_SECRET=nopotato_super_secret_jwt_key_change_this_in_production
JWT_EXPIRE=30d

# CORS é…ç½®
ALLOWED_ORIGINS=http://potato.yeadon.cc,https://potato.yeadon.cc
```

3. **ä½¿ç”¨PM2å¯åŠ¨åç«¯**
   - å®å¡”é¢æ¿ â†’ PM2ç®¡ç†å™¨ â†’ æ·»åŠ é¡¹ç›®
   - é¡¹ç›®åç§°ï¼š`nopotato-backend`
   - å¯åŠ¨æ–‡ä»¶ï¼š`/www/wwwroot/nopotato/backend/index.js`
   - è¿è¡Œç›®å½•ï¼š`/www/wwwroot/nopotato/backend`

### ç¬¬å››æ­¥ï¼šé…ç½®Nginx

1. **ä¿®æ”¹ç½‘ç«™é…ç½®**
   å®å¡”é¢æ¿ â†’ ç½‘ç«™ â†’ potato.yeadon.cc â†’ è®¾ç½® â†’ é…ç½®æ–‡ä»¶

2. **æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š**
```nginx
server {
    listen 80;
    server_name potato.yeadon.cc;
    root /www/wwwroot/nopotato/frontend;
    index index.html;

    # é™æ€æ–‡ä»¶ç¼“å­˜
    location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # APIè¯·æ±‚ä»£ç†åˆ°åç«¯
    location /api/ {
        proxy_pass http://127.0.0.1:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    # å‰ç«¯è·¯ç”±æ”¯æŒ
    location / {
        try_files $uri $uri/ /index.html;
    }

    # é”™è¯¯é¡µé¢
    error_page 404 /index.html;
}
```

### ç¬¬äº”æ­¥ï¼šé…ç½®SSLè¯ä¹¦ï¼ˆæ¨èï¼‰

1. **å®å¡”é¢æ¿ â†’ ç½‘ç«™ â†’ potato.yeadon.cc â†’ SSL**
2. **é€‰æ‹©Let's Encryptå…è´¹è¯ä¹¦**
3. **ç”³è¯·å¹¶éƒ¨ç½²è¯ä¹¦**

### ç¬¬å…­æ­¥ï¼šå¯åŠ¨MongoDB

1. **å®å¡”é¢æ¿ â†’ æ•°æ®åº“ â†’ MongoDB**
2. **å¯åŠ¨MongoDBæœåŠ¡**
3. **åˆ›å»ºæ•°æ®åº“ï¼ˆå¯é€‰ï¼‰**

## ğŸ” éƒ¨ç½²éªŒè¯

### æ£€æŸ¥æœåŠ¡çŠ¶æ€
1. **åç«¯æœåŠ¡**ï¼šPM2ç®¡ç†å™¨ä¸­æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
2. **å‰ç«¯è®¿é—®**ï¼šhttp://potato.yeadon.cc
3. **APIæµ‹è¯•**ï¼šhttp://potato.yeadon.cc/api/

### å¸¸è§é—®é¢˜æ’æŸ¥
1. **åŸŸåæ— æ³•è®¿é—®**ï¼šæ£€æŸ¥DNSè§£ææ˜¯å¦ç”Ÿæ•ˆ
2. **APIè¯·æ±‚å¤±è´¥**ï¼šæ£€æŸ¥PM2åç«¯æœåŠ¡çŠ¶æ€
3. **é™æ€æ–‡ä»¶404**ï¼šæ£€æŸ¥æ–‡ä»¶è·¯å¾„å’Œæƒé™

## ğŸ‰ éƒ¨ç½²å®Œæˆ

è®¿é—® https://potato.yeadon.cc å¼€å§‹ä½¿ç”¨ä½ çš„NoPotatoç•ªèŒ„é’Ÿåº”ç”¨ï¼
